# syntax=docker/dockerfile:1

# Single-stage build for slim container optimized for Daytona
FROM node:22.17.0

# Install Claude Code CLI & Gemini CLI
RUN npm install -g @anthropic-ai/claude-code
RUN npm install -g @google/gemini-cli

# Set working directory
WORKDIR /app


# Environment variable for Anthropic API key (will be set at runtime)
ENV ANTHROPIC_API_KEY=""


# Use non-root user for security
RUN groupadd --gid 1001 nodejs && useradd --uid 1001 --gid 1001 --create-home --shell /bin/bash claude
USER claude


CMD ["claude", "--version"]
CMD ["gemini","--version"]
ENTRYPOINT ["sleep", "infinity"]